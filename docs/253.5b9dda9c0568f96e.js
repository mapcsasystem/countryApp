"use strict";(self.webpackChunkcountryApp=self.webpackChunkcountryApp||[]).push([[253],{6253:(Ct,b,a)=>{a.r(b),a.d(b,{CountriesModule:()=>dt});var t=a(5879),u=a(6814),T=a(9862),P=a(6223),m=a(1896);var p=a(9397),D=a(7398),_=a(6306),v=a(2096);let d=(()=>{class n{constructor(){this._http=(0,t.f3M)(T.eN),this._apiUrl="https://restcountries.com/v3.1",this.cacheStore={byCapital:{term:"",countries:[]},byCoutries:{term:"",countries:[]},byRegion:{term:"",countries:[]}},this.loadLocalStorageCountries(),this.cacheStore.byCapital.term||(this.cacheStore.byCapital.term=""),this.cacheStore.byCoutries.term||(this.cacheStore.byCoutries.term=""),this.cacheStore.byRegion.term||(this.cacheStore.byRegion.term=""),this.saveToLocalStrorageCountries()}searchByCapital(e){return this._getCountiesRequest(`${this._apiUrl}/capital/${e}`).pipe((0,p.b)(r=>{this.cacheStore.byCapital={term:e,countries:r}}),(0,p.b)(()=>this.saveToLocalStrorageCountries()))}searchByCountry(e){return this._getCountiesRequest(`${this._apiUrl}/name/${e}`).pipe((0,p.b)(r=>{this.cacheStore.byCoutries={term:e,countries:r}}),(0,p.b)(()=>this.saveToLocalStrorageCountries()))}searchByRegion(e){return this._getCountiesRequest(`${this._apiUrl}/region/${e}`).pipe((0,p.b)(r=>{this.cacheStore.byRegion={term:e,countries:r}}),(0,p.b)(()=>this.saveToLocalStrorageCountries()))}searchCoutryByAlphaCode(e){return this._http.get(`${this._apiUrl}/alpha/${e}`).pipe((0,D.U)(r=>r.length>0?r[0]:null),(0,_.K)(r=>(0,v.of)(null)))}_getCountiesRequest(e){return this._http.get(e).pipe((0,_.K)(i=>(0,v.of)([])))}saveToLocalStrorageCountries(){localStorage.setItem("cacheStore",JSON.stringify(this.cacheStore))}loadLocalStorageCountries(){localStorage.getItem("cacheStore")&&(this.cacheStore=JSON.parse(localStorage.getItem("cacheStore")))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var M=a(8645),Z=a(7394),R=a(3620),N=a(617),O=a(2032),g=a(4170);let C=(()=>{class n{constructor(){this._debouncer=new M.x,this.placeholder="",this.initialValue="",this.onValue=new t.vpe,this.onDebounce=new t.vpe,this._subscription=new Z.w0}ngOnInit(){this._subscription.add(this._debouncer.pipe((0,R.b)(5e3)).subscribe(e=>{this.onDebounce.emit(e)}))}emmitValue(e){this.onValue.emit(e)}onkeyPress(e){this.onDebounce.next(e)}ngOnDestroy(){this._subscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["shared-search-box"]],inputs:{placeholder:"placeholder",initialValue:"initialValue"},outputs:{onValue:"onValue",onDebounce:"onDebounce"},decls:8,vars:2,consts:[[1,"w-full","flex","flex-row"],["appearance","outline",1,"w-full"],["matInput","",3,"placeholder","value","keyup"],["txtInput",""],["matSuffix",""]],template:function(e,i){if(1&e){const r=t.EpF();t.TgZ(0,"div",0)(1,"mat-form-field",1)(2,"mat-label"),t._uU(3,"Buscar"),t.qZA(),t.TgZ(4,"input",2,3),t.NdJ("keyup",function(){t.CHM(r);const h=t.MAs(5);return t.KtG(i.onkeyPress(h.value))}),t.qZA(),t.TgZ(6,"mat-icon",4),t._uU(7,"search"),t.qZA()()()}2&e&&(t.xp6(4),t.Q6J("placeholder",i.placeholder)("value",i.initialValue))},dependencies:[N.Hw,O.Nt,g.KE,g.hX,g.R9]}),n})();var x=a(1584),c=a(5313),f=a(3566),S=a(2296),l=a(5195);function J(n,o){1&n&&(t.TgZ(0,"th",18),t._uU(1,"#"),t.qZA())}function w(n,o){if(1&n&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&n){const i=o.index;t.Akn("font-size: 10px;background-color:"+o.$implicit.color+";color:black"),t.xp6(1),t.hij(" ",i+1," ")}}function k(n,o){1&n&&(t.TgZ(0,"th",18),t._uU(1,"ICON"),t.qZA())}function V(n,o){if(1&n&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Akn("font-size: 10px;background-color:"+e.color+";color:black"),t.xp6(1),t.hij(" ",e.flag," ")}}function z(n,o){1&n&&(t.TgZ(0,"th",18),t._uU(1,"BANDERA"),t.qZA())}function Q(n,o){if(1&n&&(t.TgZ(0,"td",19),t._UZ(1,"img",20),t.qZA()),2&n){const e=o.$implicit;t.Akn("font-size: 10px;background-color:"+e.color+";color:black"),t.xp6(1),t.Q6J("src",e.flags.svg,t.LSH)("alt",e.name.common)}}function I(n,o){1&n&&(t.TgZ(0,"th",18),t._uU(1,"PA\xcdS"),t.qZA())}function Y(n,o){if(1&n&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Akn("font-size: 10px;background-color:"+e.color+";color:black"),t.xp6(1),t.hij(" ",e.name.common," ")}}function F(n,o){1&n&&(t.TgZ(0,"th",18),t._uU(1,"POBLACI\xd3N"),t.qZA())}function L(n,o){if(1&n&&(t.TgZ(0,"td",19),t._uU(1),t.ALo(2,"number"),t.qZA()),2&n){const e=o.$implicit;t.Akn("font-size: 10px;background-color:"+e.color+";color:black"),t.xp6(1),t.hij(" ",t.lcZ(2,3,e.population)," ")}}function $(n,o){1&n&&(t.TgZ(0,"th",18),t._uU(1,"CAPITAL"),t.qZA())}function q(n,o){if(1&n&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Akn("font-size: 10px;"),t.xp6(1),t.hij(" ",e.capital," ")}}function E(n,o){1&n&&(t.TgZ(0,"th",21),t._uU(1,"ACCIONES"),t.qZA())}const j=function(n){return["/countries/by",n]};function H(n,o){if(1&n&&(t.TgZ(0,"td",19)(1,"a",22),t._uU(2,"info"),t.qZA()()),2&n){const e=o.$implicit;t.Akn("font-size: 10px;"),t.xp6(1),t.Q6J("routerLink",t.VKq(3,j,e.cca3))}}function X(n,o){1&n&&t._UZ(0,"tr",23)}function G(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"tr",24),t.NdJ("click",function(){const s=t.CHM(e).$implicit,h=t.oxw();return t.KtG(h.clickedRows(s))}),t.qZA()}}function K(n,o){1&n&&(t.TgZ(0,"tr",25)(1,"td",26),t._uU(2,"No hay datos pa\xedses"),t.qZA()())}const W=function(){return[5,10,25]};let y=(()=>{class n{constructor(){this.countries=[],this.displayedColumns=["#","icon","flag","country","population","capital","actions"]}ngOnInit(){this.addCountries()}ngOnChanges(e){this.addCountries()}addCountries(){this.dataSource=new c.by([...this.countries]),this.paginator._intl.firstPageLabel="Primera p\xe1gina",this.paginator._intl.itemsPerPageLabel="Datos por p\xe1gina",this.paginator._intl.lastPageLabel="\xfaltima p\xe1gina",this.paginator._intl.nextPageLabel="Siguiente p\xe1gina",this.paginator._intl.previousPageLabel="P\xe1gina anterior",this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}clickedRows(e){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["countries-table"]],viewQuery:function(e,i){if(1&e&&(t.Gf(x.NW,7),t.Gf(f.YE,5)),2&e){let r;t.iGM(r=t.CRH())&&(i.paginator=r.first),t.iGM(r=t.CRH())&&(i.sort=r.first)}},inputs:{countries:"countries"},features:[t.TTD],decls:29,vars:5,consts:[[1,"mat-elevation-z0"],[1,"mat-elevation-z8","displayBlock"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","#"],["mat-header-cell","","mat-sort-header","","style","font-size: 12px;",4,"matHeaderCellDef"],["mat-cell","",3,"style",4,"matCellDef"],["matColumnDef","icon"],["matColumnDef","flag"],["matColumnDef","country"],["matColumnDef","population"],["matColumnDef","capital"],["matColumnDef","actions","stickyEnd",""],["mat-header-cell","","style","font-size: 12px;",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of users",1,"mat-elevation-z8",3,"pageSizeOptions"],["paginator",""],["mat-header-cell","","mat-sort-header","",2,"font-size","12px"],["mat-cell",""],["width","25",3,"src","alt"],["mat-header-cell","",2,"font-size","12px"],["mat-button","",3,"routerLink"],["mat-header-row",""],["mat-row","",3,"click"],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-content",1)(2,"table",2),t.ynx(3,3),t.YNc(4,J,2,0,"th",4),t.YNc(5,w,2,3,"td",5),t.BQk(),t.ynx(6,6),t.YNc(7,k,2,0,"th",4),t.YNc(8,V,2,3,"td",5),t.BQk(),t.ynx(9,7),t.YNc(10,z,2,0,"th",4),t.YNc(11,Q,2,4,"td",5),t.BQk(),t.ynx(12,8),t.YNc(13,I,2,0,"th",4),t.YNc(14,Y,2,3,"td",5),t.BQk(),t.ynx(15,9),t.YNc(16,F,2,0,"th",4),t.YNc(17,L,3,5,"td",5),t.BQk(),t.ynx(18,10),t.YNc(19,$,2,0,"th",4),t.YNc(20,q,2,3,"td",5),t.BQk(),t.ynx(21,11),t.YNc(22,E,2,0,"th",12),t.YNc(23,H,3,5,"td",5),t.BQk(),t.YNc(24,X,1,0,"tr",13),t.YNc(25,G,1,0,"tr",14),t.YNc(26,K,3,0,"tr",15),t.qZA()(),t._UZ(27,"mat-paginator",16,17),t.qZA()),2&e&&(t.xp6(2),t.Q6J("dataSource",i.dataSource),t.xp6(22),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(4,W)))},dependencies:[m.rH,S.zs,l.a8,l.dn,x.NW,f.YE,f.nU,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,c.Ee,u.JJ],styles:[".displayBlock[_ngcontent-%COMP%]{height:52vh}table[_ngcontent-%COMP%]{width:100%;height:auto}.mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:25%}"]}),n})(),tt=(()=>{class n{constructor(){this._countriesService=(0,t.f3M)(d),this.countries=[],this.initialValue=""}ngOnInit(){this.countries=this._countriesService.cacheStore.byCapital.countries,this.initialValue=this._countriesService.cacheStore.byCapital.term}seachByCapital(e){this._countriesService.searchByCapital(e).subscribe(i=>{this.countries=[...i]})}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["by-capital"]],decls:5,vars:3,consts:[[3,"placeholder","initialValue","onDebounce"],[3,"countries"]],template:function(e,i){1&e&&(t.TgZ(0,"h2"),t._uU(1," Por Capital\n"),t.qZA(),t._UZ(2,"hr"),t.TgZ(3,"shared-search-box",0),t.NdJ("onDebounce",function(s){return i.seachByCapital(s)}),t.qZA(),t._UZ(4,"countries-table",1)),2&e&&(t.xp6(3),t.Q6J("placeholder","Buscar por capital...")("initialValue",i.initialValue),t.xp6(1),t.Q6J("countries",i.countries))},dependencies:[C,y]}),n})(),et=(()=>{class n{constructor(){this._countriesService=(0,t.f3M)(d),this.countries=[],this.initialValue=""}ngOnInit(){this.countries=this._countriesService.cacheStore.byCoutries.countries,this.initialValue=this._countriesService.cacheStore.byCoutries.term}searchByCountry(e){this._countriesService.searchByCountry(e).subscribe(i=>{this.countries=[...i]})}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["by-country"]],decls:5,vars:3,consts:[[3,"placeholder","initialValue","onDebounce"],[3,"countries"]],template:function(e,i){1&e&&(t.TgZ(0,"h2"),t._uU(1," Por Pa\xeds\n"),t.qZA(),t._UZ(2,"hr"),t.TgZ(3,"shared-search-box",0),t.NdJ("onDebounce",function(s){return i.searchByCountry(s)}),t.qZA(),t._UZ(4,"countries-table",1)),2&e&&(t.xp6(3),t.Q6J("placeholder","Buscar por pa\xeds...")("initialValue",i.initialValue),t.xp6(1),t.Q6J("countries",i.countries))},dependencies:[C,y]}),n})(),nt=(()=>{class n{constructor(){this._countriesService=(0,t.f3M)(d),this.countries=[],this.initialValue=""}ngOnInit(){this.countries=this._countriesService.cacheStore.byRegion.countries,this.initialValue=this._countriesService.cacheStore.byRegion.term}seachByRegion(e){this._countriesService.searchByRegion(e).subscribe(i=>{this.countries=[...i]})}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["by-region"]],decls:5,vars:3,consts:[[3,"placeholder","initialValue","onDebounce"],[3,"countries"]],template:function(e,i){1&e&&(t.TgZ(0,"h2"),t._uU(1," Por Regi\xf3n\n"),t.qZA(),t._UZ(2,"hr"),t.TgZ(3,"shared-search-box",0),t.NdJ("onDebounce",function(s){return i.seachByRegion(s)}),t.qZA(),t._UZ(4,"countries-table",1)),2&e&&(t.xp6(3),t.Q6J("placeholder","Buscar por region...")("initialValue",i.initialValue),t.xp6(1),t.Q6J("countries",i.countries))},dependencies:[C,y]}),n})();var ot=a(4664),it=a(8424),A=a(2557),B=a(1919);function at(n,o){if(1&n&&(t.TgZ(0,"mat-chip",11),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",e.common," ")}}function rt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",2)(1,"mat-card",3)(2,"mat-card-header"),t._UZ(3,"div",4),t.TgZ(4,"mat-card-title"),t._uU(5),t.qZA(),t.TgZ(6,"mat-card-subtitle"),t._uU(7),t.qZA()(),t.TgZ(8,"div"),t._UZ(9,"img",5),t.qZA(),t.TgZ(10,"mat-card-content")(11,"mat-list",6)(12,"mat-list-item",7),t._uU(13),t.ALo(14,"number"),t.qZA(),t.TgZ(15,"mat-list-item",7),t._uU(16),t.qZA()(),t.TgZ(17,"mat-card-subtitle"),t._uU(18,"Traducci\xf3nes Idiomas"),t.qZA(),t.TgZ(19,"mat-chip-set"),t.YNc(20,at,2,1,"mat-chip",8),t.qZA()(),t.TgZ(21,"mat-card-actions",9)(22,"button",10),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.goReturn())}),t._uU(23,"Regresar"),t.qZA()()()()}if(2&n){const e=t.oxw();t.xp6(3),t.Akn(e.url),t.xp6(2),t.Oqu(e.country.name.common),t.xp6(2),t.Oqu(e.country.capital),t.xp6(2),t.Q6J("src",e.country.flags.png,t.LSH)("alt",e.country.name.common),t.xp6(4),t.hij("Poblacion: ",t.lcZ(14,9,e.country.population),""),t.xp6(3),t.hij("C\xf3digo: ",e.country.cca3,""),t.xp6(4),t.Q6J("ngForOf",e.translations)}}function ct(n,o){1&n&&t._UZ(0,"div")}const st=[{path:"by-capital",component:tt},{path:"by-country",component:et},{path:"by-region",component:nt},{path:"by/:id",component:(()=>{class n{constructor(){this._activatedRoute=(0,t.f3M)(m.gz),this._countriesService=(0,t.f3M)(d),this._router=(0,t.f3M)(m.F0),this._subscription=new Z.w0,this.loadingService=(0,t.f3M)(it.b),this.url="",this.translations=[]}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this._subscription.add(this._activatedRoute.params.pipe((0,ot.w)(({id:e})=>this._countriesService.searchCoutryByAlphaCode(e))).subscribe(e=>{if(!e)return this._router.navigateByUrl("");this.country=e,this.url=`background-image:url("${e.flags.png}")`;const i=[];for(const r in e.translations)i.push(r),this.translations.push(e.translations[r]);this.translations=this.deleteDuplicates(this.translations)}))},500)}deleteDuplicates(e){return e.filter((i,r,s)=>r===s.findIndex(gt=>gt.common===i.common))}goReturn(){this._router.navigateByUrl("countries")}ngOnDestroy(){this._subscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["by-country-page"]],decls:3,vars:2,consts:[["class","container",4,"ngIf","ngIfElse"],["loading",""],[1,"container"],[1,"card"],["mat-card-avatar","",1,"header-image"],["mat-card-image","",3,"src","alt"],["role","list"],["role","listitem"],["class","box",4,"ngFor","ngForOf"],["align","end"],["mat-button","",3,"click"],[1,"box"]],template:function(e,i){if(1&e&&(t.YNc(0,rt,24,11,"div",0),t.YNc(1,ct,1,0,"ng-template",null,1,t.W1O)),2&e){const r=t.MAs(2);t.Q6J("ngIf",i.country)("ngIfElse",r)}},dependencies:[u.sg,u.O5,S.lW,l.a8,l.hq,l.kc,l.dn,l.dk,l.G2,l.$j,l.n5,A.HS,A.J4,B.i$,B.Tg,u.JJ],styles:[".container[_ngcontent-%COMP%], .loading[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center}.card[_ngcontent-%COMP%]{max-width:400px}.header-image[_ngcontent-%COMP%]{background-size:cover}.box.cdk-drag-animating[_ngcontent-%COMP%], .chip[_ngcontent-%COMP%]   .cdk-drop-list-dragging[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}"]}),n})()},{path:"**",redirectTo:"by-capital"}];let lt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[m.Bz.forChild(st),m.Bz]}),n})();var ut=a(1419),pt=a(6208),mt=a(2381),ht=a(3680);(0,u.qS)(mt.Z,"es-MX");let dt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[{provide:ht.Ad,useValue:"es-MX"},{provide:t.soG,useValue:"es-MX"},{provide:t.EJc,useValue:"MXN"}],imports:[u.ez,lt,T.JF,P.UX,ut.q,pt.m]}),n})()}}]);